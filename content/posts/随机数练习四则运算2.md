---
title: "四则运算练习器2"
description: "C语言四则运算并判断正误"
tags: [ "C语言","函数调用","四则运算"]
categories: [ "C语言"]
keywords: [ "C语言"]
date: 2020-05-03T00:35:22Z
#lastmod:2020-1-1
# CJKLanguage: Chinese, Japanese, Korean
isCJKLanguage: true
# 如果draft为true，除非使用 --buildDrafts 参数，否则不会发布文章
draft: false
# 设置文章的过期时间，如果是已过期的文章则不会发布，除非使用 --buildExpired 参数
#expiryDate: 2020-01-01
# 设置文章的发布时间，如果是未来的时间则不会发布，除非使用 --buildFuture 参数
#publishDate: 2020-01-01
# 排序你的文章
#weight: 40
---

Talk is easy, Show you code！
```c
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <time.h>
int rand_n(int, int, int);
int cal(float, float, float, char);
int main()
{

	int seed = 0, i, score = 10, ct, correct = 0, fault = 0;
	int max = 10, min = 0;
	// 设置两个操作数的取值范围
	float par1, par2, anwser;
	char sign[4] = { '+', '-', '*', '/' }, f;
	printf("欢迎使用Mr.X四则运算练习系统\n注：做除法时请保留6位小数\n");
	printf("请输入题目个数\n");
	scanf("%d", &i);
	ct = i;
	while (i--)
	{
		f = sign[rand_n(0, 3, seed++)];
		par1 = rand_n(min, max, seed++);
		while (1)
		{
			par2 = rand_n(min, max, seed++);
			if (!par2&&f=='/')
				continue;
			else
				break;
		}
		printf("%.0f%c%.0f=",par1, f, par2);
		scanf("%f", &anwser);
		if (cal(par1, par2, anwser, f))
			correct++;
		else
			fault++;
	}
	printf
		("\n训练结束！总共有%d道题目\n一题%d分，总分是%d分\n你做对了%d道题目\n做错了%d道题目\n总共得到了%d分\n\n欢迎下次使用！\n",
		 ct, score, score * ct, correct, fault, correct * score);

	return 0;
}

int rand_n(int min, int max, int seed)
// 返回一个随机数，整数
{
	srand((int)time(NULL) + seed);
	return rand() % (max - min + 1) + min;
}

int cal(float x, float y, float z, char c)
{
	int t;
	t = fabs(x * y - z) <= (1e-6);
	switch (c)
	{
	case '+':
		if (x + y == z)
		{
			printf("回答正确！干得漂亮！\n");
			return 1;
		}
		else
		{
			printf("非常遗憾，你做错了，正确答案是%.0f\n", x + y);
			return 0;
		}
		break;

	case '-':
		if (x - y == z)
		{
			printf("回答正确！干得漂亮！\n");
			return 1;
		}
		else
		{
			printf("非常遗憾，你做错了，正确答案是%.0f\n", x - y);
			return 0;
		}
		break;

	case '*':
		if (x * y == z || (x - (int)x > 0 && t || y - (int)y > 0 && t))
		{
			printf("回答正确！干得漂亮！\n");
			return 1;
		}
		else
		{
			printf("非常遗憾，你做错了，正确答案是%f\n", x * y);
			return 0;
		}


		break;

	case '/':
		if ((y != 0) && (x / y == z))
		{
			printf("回答正确！干得漂亮！\n");
			return 1;
		}
		else
		{
			printf("非常遗憾，你做错了，正确答案是%f\n",x/y);
			return 0;
		}
		break;

	default:
		printf("本程序只支持四则运算！\n");
	}

	return 0;
}
```
